/* xml-deserializer.c generated by valac 0.20.1.19-a6516, the Vala compiler
 * generated from xml-deserializer.vala, do not modify */


#include <glib.h>
#include <glib-object.h>
#include <stdlib.h>
#include <string.h>
#include <gio/gio.h>
#include <gee.h>
#include <libxml/tree.h>
#include <libxml/parser.h>
#include <stdio.h>
#include <float.h>
#include <math.h>


#define CARIBOU_TYPE_XML_DESERIALIZER (caribou_xml_deserializer_get_type ())
#define CARIBOU_XML_DESERIALIZER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), CARIBOU_TYPE_XML_DESERIALIZER, CaribouXmlDeserializer))
#define CARIBOU_XML_DESERIALIZER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), CARIBOU_TYPE_XML_DESERIALIZER, CaribouXmlDeserializerClass))
#define CARIBOU_IS_XML_DESERIALIZER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), CARIBOU_TYPE_XML_DESERIALIZER))
#define CARIBOU_IS_XML_DESERIALIZER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), CARIBOU_TYPE_XML_DESERIALIZER))
#define CARIBOU_XML_DESERIALIZER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), CARIBOU_TYPE_XML_DESERIALIZER, CaribouXmlDeserializerClass))

typedef struct _CaribouXmlDeserializer CaribouXmlDeserializer;
typedef struct _CaribouXmlDeserializerClass CaribouXmlDeserializerClass;
typedef struct _CaribouXmlDeserializerPrivate CaribouXmlDeserializerPrivate;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))

#define CARIBOU_TYPE_GROUP_MODEL (caribou_group_model_get_type ())
#define CARIBOU_GROUP_MODEL(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), CARIBOU_TYPE_GROUP_MODEL, CaribouGroupModel))
#define CARIBOU_GROUP_MODEL_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), CARIBOU_TYPE_GROUP_MODEL, CaribouGroupModelClass))
#define CARIBOU_IS_GROUP_MODEL(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), CARIBOU_TYPE_GROUP_MODEL))
#define CARIBOU_IS_GROUP_MODEL_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), CARIBOU_TYPE_GROUP_MODEL))
#define CARIBOU_GROUP_MODEL_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), CARIBOU_TYPE_GROUP_MODEL, CaribouGroupModelClass))

typedef struct _CaribouGroupModel CaribouGroupModel;
typedef struct _CaribouGroupModelClass CaribouGroupModelClass;
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))

#define CARIBOU_TYPE_SCANNABLE_GROUP (caribou_scannable_group_get_type ())
#define CARIBOU_SCANNABLE_GROUP(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), CARIBOU_TYPE_SCANNABLE_GROUP, CaribouScannableGroup))
#define CARIBOU_SCANNABLE_GROUP_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), CARIBOU_TYPE_SCANNABLE_GROUP, CaribouScannableGroupClass))
#define CARIBOU_IS_SCANNABLE_GROUP(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), CARIBOU_TYPE_SCANNABLE_GROUP))
#define CARIBOU_IS_SCANNABLE_GROUP_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), CARIBOU_TYPE_SCANNABLE_GROUP))
#define CARIBOU_SCANNABLE_GROUP_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), CARIBOU_TYPE_SCANNABLE_GROUP, CaribouScannableGroupClass))

typedef struct _CaribouScannableGroup CaribouScannableGroup;
typedef struct _CaribouScannableGroupClass CaribouScannableGroupClass;

#define CARIBOU_TYPE_LEVEL_MODEL (caribou_level_model_get_type ())
#define CARIBOU_LEVEL_MODEL(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), CARIBOU_TYPE_LEVEL_MODEL, CaribouLevelModel))
#define CARIBOU_LEVEL_MODEL_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), CARIBOU_TYPE_LEVEL_MODEL, CaribouLevelModelClass))
#define CARIBOU_IS_LEVEL_MODEL(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), CARIBOU_TYPE_LEVEL_MODEL))
#define CARIBOU_IS_LEVEL_MODEL_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), CARIBOU_TYPE_LEVEL_MODEL))
#define CARIBOU_LEVEL_MODEL_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), CARIBOU_TYPE_LEVEL_MODEL, CaribouLevelModelClass))

typedef struct _CaribouLevelModel CaribouLevelModel;
typedef struct _CaribouLevelModelClass CaribouLevelModelClass;

#define CARIBOU_TYPE_ROW_MODEL (caribou_row_model_get_type ())
#define CARIBOU_ROW_MODEL(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), CARIBOU_TYPE_ROW_MODEL, CaribouRowModel))
#define CARIBOU_ROW_MODEL_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), CARIBOU_TYPE_ROW_MODEL, CaribouRowModelClass))
#define CARIBOU_IS_ROW_MODEL(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), CARIBOU_TYPE_ROW_MODEL))
#define CARIBOU_IS_ROW_MODEL_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), CARIBOU_TYPE_ROW_MODEL))
#define CARIBOU_ROW_MODEL_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), CARIBOU_TYPE_ROW_MODEL, CaribouRowModelClass))

typedef struct _CaribouRowModel CaribouRowModel;
typedef struct _CaribouRowModelClass CaribouRowModelClass;

#define CARIBOU_TYPE_COLUMN_MODEL (caribou_column_model_get_type ())
#define CARIBOU_COLUMN_MODEL(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), CARIBOU_TYPE_COLUMN_MODEL, CaribouColumnModel))
#define CARIBOU_COLUMN_MODEL_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), CARIBOU_TYPE_COLUMN_MODEL, CaribouColumnModelClass))
#define CARIBOU_IS_COLUMN_MODEL(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), CARIBOU_TYPE_COLUMN_MODEL))
#define CARIBOU_IS_COLUMN_MODEL_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), CARIBOU_TYPE_COLUMN_MODEL))
#define CARIBOU_COLUMN_MODEL_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), CARIBOU_TYPE_COLUMN_MODEL, CaribouColumnModelClass))

typedef struct _CaribouColumnModel CaribouColumnModel;
typedef struct _CaribouColumnModelClass CaribouColumnModelClass;

#define CARIBOU_TYPE_KEY_MODEL (caribou_key_model_get_type ())
#define CARIBOU_KEY_MODEL(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), CARIBOU_TYPE_KEY_MODEL, CaribouKeyModel))
#define CARIBOU_KEY_MODEL_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), CARIBOU_TYPE_KEY_MODEL, CaribouKeyModelClass))
#define CARIBOU_IS_KEY_MODEL(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), CARIBOU_TYPE_KEY_MODEL))
#define CARIBOU_IS_KEY_MODEL_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), CARIBOU_TYPE_KEY_MODEL))
#define CARIBOU_KEY_MODEL_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), CARIBOU_TYPE_KEY_MODEL, CaribouKeyModelClass))

typedef struct _CaribouKeyModel CaribouKeyModel;
typedef struct _CaribouKeyModelClass CaribouKeyModelClass;
#define _vala_assert(expr, msg) if G_LIKELY (expr) ; else g_assertion_message_expr (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, msg);

struct _CaribouXmlDeserializer {
	GObject parent_instance;
	CaribouXmlDeserializerPrivate * priv;
};

struct _CaribouXmlDeserializerClass {
	GObjectClass parent_class;
};


static gpointer caribou_xml_deserializer_parent_class = NULL;

GType caribou_xml_deserializer_get_type (void) G_GNUC_CONST;
enum  {
	CARIBOU_XML_DESERIALIZER_DUMMY_PROPERTY
};
gchar* caribou_xml_deserializer_get_layout_file_inner (const gchar* data_dir, const gchar* group, const gchar* variant);
gchar* caribou_xml_deserializer_get_layout_file (const gchar* keyboard_type, const gchar* group, const gchar* variant, GError** error);
GType caribou_group_model_get_type (void) G_GNUC_CONST;
CaribouGroupModel* caribou_xml_deserializer_load_group (const gchar* keyboard_type, const gchar* group, const gchar* variant);
CaribouGroupModel* caribou_group_model_new (const gchar* group, const gchar* variant);
CaribouGroupModel* caribou_group_model_construct (GType object_type, const gchar* group, const gchar* variant);
void caribou_xml_deserializer_create_levels_from_xml (CaribouGroupModel* group, xmlNode* node);
GType caribou_scannable_group_get_type (void) G_GNUC_CONST;
GType caribou_level_model_get_type (void) G_GNUC_CONST;
CaribouLevelModel* caribou_level_model_new (const gchar* mode);
CaribouLevelModel* caribou_level_model_construct (GType object_type, const gchar* mode);
void caribou_xml_deserializer_load_rows (CaribouLevelModel* level, xmlNode* node);
void caribou_group_model_add_level (CaribouGroupModel* self, const gchar* lname, CaribouLevelModel* level);
GType caribou_row_model_get_type (void) G_GNUC_CONST;
CaribouRowModel* caribou_row_model_new (void);
CaribouRowModel* caribou_row_model_construct (GType object_type);
void caribou_level_model_add_row (CaribouLevelModel* self, CaribouRowModel* row);
void caribou_xml_deserializer_load_column (CaribouRowModel* row, const gchar* align, xmlNode* node);
GType caribou_column_model_get_type (void) G_GNUC_CONST;
CaribouColumnModel* caribou_column_model_new (void);
CaribouColumnModel* caribou_column_model_construct (GType object_type);
void caribou_row_model_add_column (CaribouRowModel* self, CaribouColumnModel* column);
GType caribou_key_model_get_type (void) G_GNUC_CONST;
void caribou_column_model_add_key (CaribouColumnModel* self, CaribouKeyModel* key);
CaribouKeyModel* caribou_xml_deserializer_load_key (xmlNode* node, const gchar* align);
CaribouKeyModel* caribou_key_model_new (const gchar* name, const gchar* text);
CaribouKeyModel* caribou_key_model_construct (GType object_type, const gchar* name, const gchar* text);
void caribou_key_model_set_align (CaribouKeyModel* self, const gchar* value);
void caribou_key_model_set_toggle (CaribouKeyModel* self, const gchar* value);
void caribou_key_model_set_width (CaribouKeyModel* self, gdouble value);
void caribou_key_model_set_repeatable (CaribouKeyModel* self, gboolean value);
void caribou_key_model_add_subkey (CaribouKeyModel* self, CaribouKeyModel* key);
CaribouXmlDeserializer* caribou_xml_deserializer_new (void);
CaribouXmlDeserializer* caribou_xml_deserializer_construct (GType object_type);
static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func);
static gint _vala_array_length (gpointer array);


static const gchar* string_to_string (const gchar* self) {
	const gchar* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	result = self;
	return result;
}


gchar* caribou_xml_deserializer_get_layout_file_inner (const gchar* data_dir, const gchar* group, const gchar* variant) {
	gchar* result = NULL;
	gchar** files = NULL;
	const gchar* _tmp0_;
	const gchar* _tmp1_ = NULL;
	const gchar* _tmp2_;
	const gchar* _tmp3_ = NULL;
	gchar* _tmp4_ = NULL;
	const gchar* _tmp5_;
	const gchar* _tmp6_ = NULL;
	gchar* _tmp7_ = NULL;
	gchar** _tmp8_ = NULL;
	gint files_length1;
	gint _files_size_;
	gchar** _tmp9_;
	gint _tmp9__length1;
	g_return_val_if_fail (data_dir != NULL, NULL);
	g_return_val_if_fail (group != NULL, NULL);
	g_return_val_if_fail (variant != NULL, NULL);
	_tmp0_ = group;
	_tmp1_ = string_to_string (_tmp0_);
	_tmp2_ = variant;
	_tmp3_ = string_to_string (_tmp2_);
	_tmp4_ = g_strconcat (_tmp1_, "_", _tmp3_, ".xml", NULL);
	_tmp5_ = group;
	_tmp6_ = string_to_string (_tmp5_);
	_tmp7_ = g_strconcat (_tmp6_, ".xml", NULL);
	_tmp8_ = g_new0 (gchar*, 2 + 1);
	_tmp8_[0] = _tmp4_;
	_tmp8_[1] = _tmp7_;
	files = _tmp8_;
	files_length1 = 2;
	_files_size_ = files_length1;
	_tmp9_ = files;
	_tmp9__length1 = files_length1;
	{
		gchar** fn_collection = NULL;
		gint fn_collection_length1 = 0;
		gint _fn_collection_size_ = 0;
		gint fn_it = 0;
		fn_collection = _tmp9_;
		fn_collection_length1 = _tmp9__length1;
		for (fn_it = 0; fn_it < _tmp9__length1; fn_it = fn_it + 1) {
			gchar* _tmp10_;
			gchar* fn = NULL;
			_tmp10_ = g_strdup (fn_collection[fn_it]);
			fn = _tmp10_;
			{
				gchar* layout_fn = NULL;
				const gchar* _tmp11_;
				const gchar* _tmp12_;
				gchar* _tmp13_ = NULL;
				GFile* fp = NULL;
				const gchar* _tmp14_;
				GFile* _tmp15_ = NULL;
				GFile* _tmp16_;
				gboolean _tmp17_ = FALSE;
				_tmp11_ = data_dir;
				_tmp12_ = fn;
				_tmp13_ = g_build_filename (_tmp11_, _tmp12_, NULL);
				layout_fn = _tmp13_;
				_tmp14_ = layout_fn;
				_tmp15_ = g_file_new_for_path (_tmp14_);
				fp = _tmp15_;
				_tmp16_ = fp;
				_tmp17_ = g_file_query_exists (_tmp16_, NULL);
				if (_tmp17_) {
					result = layout_fn;
					_g_object_unref0 (fp);
					_g_free0 (fn);
					files = (_vala_array_free (files, files_length1, (GDestroyNotify) g_free), NULL);
					return result;
				}
				_g_object_unref0 (fp);
				_g_free0 (layout_fn);
				_g_free0 (fn);
			}
		}
	}
	result = NULL;
	files = (_vala_array_free (files, files_length1, (GDestroyNotify) g_free), NULL);
	return result;
}


static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


gchar* caribou_xml_deserializer_get_layout_file (const gchar* keyboard_type, const gchar* group, const gchar* variant, GError** error) {
	gchar* result = NULL;
	GeeArrayList* dirs = NULL;
	GeeArrayList* _tmp0_;
	gchar* custom_dir = NULL;
	const gchar* _tmp1_ = NULL;
	gchar* _tmp2_;
	const gchar* _tmp3_;
	GeeArrayList* _tmp9_;
	const gchar* _tmp10_ = NULL;
	const gchar* _tmp11_;
	gchar* _tmp12_ = NULL;
	gchar* _tmp13_;
	gchar** _tmp14_;
	gchar** _tmp15_ = NULL;
	GeeArrayList* _tmp22_;
	const gchar* _tmp23_ = NULL;
	gchar* _tmp24_ = NULL;
	gchar* _tmp25_;
	gchar** _tmp26_;
	gchar** _tmp27_ = NULL;
	const gchar* _tmp63_;
	const gchar* _tmp64_;
	GError* _tmp65_;
	GError * _inner_error_ = NULL;
	g_return_val_if_fail (keyboard_type != NULL, NULL);
	g_return_val_if_fail (group != NULL, NULL);
	g_return_val_if_fail (variant != NULL, NULL);
	_tmp0_ = gee_array_list_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, NULL, NULL, NULL);
	dirs = _tmp0_;
	_tmp1_ = g_getenv ("CARIBOU_LAYOUTS_DIR");
	_tmp2_ = g_strdup (_tmp1_);
	custom_dir = _tmp2_;
	_tmp3_ = custom_dir;
	if (_tmp3_ != NULL) {
		GeeArrayList* _tmp4_;
		const gchar* _tmp5_;
		const gchar* _tmp6_;
		gchar* _tmp7_ = NULL;
		gchar* _tmp8_;
		_tmp4_ = dirs;
		_tmp5_ = custom_dir;
		_tmp6_ = keyboard_type;
		_tmp7_ = g_build_filename (_tmp5_, "layouts", _tmp6_, NULL);
		_tmp8_ = _tmp7_;
		gee_abstract_collection_add ((GeeAbstractCollection*) _tmp4_, _tmp8_);
		_g_free0 (_tmp8_);
	}
	_tmp9_ = dirs;
	_tmp10_ = g_get_user_data_dir ();
	_tmp11_ = keyboard_type;
	_tmp12_ = g_build_filename (_tmp10_, "caribou", "layouts", _tmp11_, NULL);
	_tmp13_ = _tmp12_;
	gee_abstract_collection_add ((GeeAbstractCollection*) _tmp9_, _tmp13_);
	_g_free0 (_tmp13_);
	_tmp15_ = _tmp14_ = g_get_system_data_dirs ();
	{
		gchar** dir_collection = NULL;
		gint dir_collection_length1 = 0;
		gint _dir_collection_size_ = 0;
		gint dir_it = 0;
		dir_collection = _tmp15_;
		dir_collection_length1 = _vala_array_length (_tmp14_);
		for (dir_it = 0; dir_it < _vala_array_length (_tmp14_); dir_it = dir_it + 1) {
			gchar* _tmp16_;
			gchar* dir = NULL;
			_tmp16_ = g_strdup (dir_collection[dir_it]);
			dir = _tmp16_;
			{
				GeeArrayList* _tmp17_;
				const gchar* _tmp18_;
				const gchar* _tmp19_;
				gchar* _tmp20_ = NULL;
				gchar* _tmp21_;
				_tmp17_ = dirs;
				_tmp18_ = dir;
				_tmp19_ = keyboard_type;
				_tmp20_ = g_build_filename (_tmp18_, "caribou", "layouts", _tmp19_, NULL);
				_tmp21_ = _tmp20_;
				gee_abstract_collection_add ((GeeAbstractCollection*) _tmp17_, _tmp21_);
				_g_free0 (_tmp21_);
				_g_free0 (dir);
			}
		}
	}
	_tmp22_ = dirs;
	_tmp23_ = g_get_user_data_dir ();
	_tmp24_ = g_build_filename (_tmp23_, "caribou", "layouts", "touch", NULL);
	_tmp25_ = _tmp24_;
	gee_abstract_collection_add ((GeeAbstractCollection*) _tmp22_, _tmp25_);
	_g_free0 (_tmp25_);
	_tmp27_ = _tmp26_ = g_get_system_data_dirs ();
	{
		gchar** dir_collection = NULL;
		gint dir_collection_length1 = 0;
		gint _dir_collection_size_ = 0;
		gint dir_it = 0;
		dir_collection = _tmp27_;
		dir_collection_length1 = _vala_array_length (_tmp26_);
		for (dir_it = 0; dir_it < _vala_array_length (_tmp26_); dir_it = dir_it + 1) {
			gchar* _tmp28_;
			gchar* dir = NULL;
			_tmp28_ = g_strdup (dir_collection[dir_it]);
			dir = _tmp28_;
			{
				GeeArrayList* _tmp29_;
				const gchar* _tmp30_;
				gchar* _tmp31_ = NULL;
				gchar* _tmp32_;
				_tmp29_ = dirs;
				_tmp30_ = dir;
				_tmp31_ = g_build_filename (_tmp30_, "caribou", "layouts", "touch", NULL);
				_tmp32_ = _tmp31_;
				gee_abstract_collection_add ((GeeAbstractCollection*) _tmp29_, _tmp32_);
				_g_free0 (_tmp32_);
				_g_free0 (dir);
			}
		}
	}
	{
		GeeArrayList* _data_dir_list = NULL;
		GeeArrayList* _tmp33_;
		GeeArrayList* _tmp34_;
		gint _data_dir_size = 0;
		GeeArrayList* _tmp35_;
		gint _tmp36_;
		gint _tmp37_;
		gint _data_dir_index = 0;
		_tmp33_ = dirs;
		_tmp34_ = _g_object_ref0 (_tmp33_);
		_data_dir_list = _tmp34_;
		_tmp35_ = _data_dir_list;
		_tmp36_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp35_);
		_tmp37_ = _tmp36_;
		_data_dir_size = _tmp37_;
		_data_dir_index = -1;
		while (TRUE) {
			gint _tmp38_;
			gint _tmp39_;
			gint _tmp40_;
			gchar* data_dir = NULL;
			GeeArrayList* _tmp41_;
			gint _tmp42_;
			gpointer _tmp43_ = NULL;
			gchar* fn = NULL;
			const gchar* _tmp44_;
			const gchar* _tmp45_;
			const gchar* _tmp46_;
			gchar* _tmp47_ = NULL;
			const gchar* _tmp48_;
			_tmp38_ = _data_dir_index;
			_data_dir_index = _tmp38_ + 1;
			_tmp39_ = _data_dir_index;
			_tmp40_ = _data_dir_size;
			if (!(_tmp39_ < _tmp40_)) {
				break;
			}
			_tmp41_ = _data_dir_list;
			_tmp42_ = _data_dir_index;
			_tmp43_ = gee_abstract_list_get ((GeeAbstractList*) _tmp41_, _tmp42_);
			data_dir = (gchar*) _tmp43_;
			_tmp44_ = data_dir;
			_tmp45_ = group;
			_tmp46_ = variant;
			_tmp47_ = caribou_xml_deserializer_get_layout_file_inner (_tmp44_, _tmp45_, _tmp46_);
			fn = _tmp47_;
			_tmp48_ = fn;
			if (_tmp48_ != NULL) {
				result = fn;
				_g_free0 (data_dir);
				_g_object_unref0 (_data_dir_list);
				_g_free0 (custom_dir);
				_g_object_unref0 (dirs);
				return result;
			}
			_g_free0 (fn);
			_g_free0 (data_dir);
		}
		_g_object_unref0 (_data_dir_list);
	}
	{
		GeeArrayList* _data_dir_list = NULL;
		GeeArrayList* _tmp49_;
		GeeArrayList* _tmp50_;
		gint _data_dir_size = 0;
		GeeArrayList* _tmp51_;
		gint _tmp52_;
		gint _tmp53_;
		gint _data_dir_index = 0;
		_tmp49_ = dirs;
		_tmp50_ = _g_object_ref0 (_tmp49_);
		_data_dir_list = _tmp50_;
		_tmp51_ = _data_dir_list;
		_tmp52_ = gee_abstract_collection_get_size ((GeeCollection*) _tmp51_);
		_tmp53_ = _tmp52_;
		_data_dir_size = _tmp53_;
		_data_dir_index = -1;
		while (TRUE) {
			gint _tmp54_;
			gint _tmp55_;
			gint _tmp56_;
			gchar* data_dir = NULL;
			GeeArrayList* _tmp57_;
			gint _tmp58_;
			gpointer _tmp59_ = NULL;
			gchar* fn = NULL;
			const gchar* _tmp60_;
			gchar* _tmp61_ = NULL;
			const gchar* _tmp62_;
			_tmp54_ = _data_dir_index;
			_data_dir_index = _tmp54_ + 1;
			_tmp55_ = _data_dir_index;
			_tmp56_ = _data_dir_size;
			if (!(_tmp55_ < _tmp56_)) {
				break;
			}
			_tmp57_ = _data_dir_list;
			_tmp58_ = _data_dir_index;
			_tmp59_ = gee_abstract_list_get ((GeeAbstractList*) _tmp57_, _tmp58_);
			data_dir = (gchar*) _tmp59_;
			_tmp60_ = data_dir;
			_tmp61_ = caribou_xml_deserializer_get_layout_file_inner (_tmp60_, "us", "");
			fn = _tmp61_;
			_tmp62_ = fn;
			if (_tmp62_ != NULL) {
				result = fn;
				_g_free0 (data_dir);
				_g_object_unref0 (_data_dir_list);
				_g_free0 (custom_dir);
				_g_object_unref0 (dirs);
				return result;
			}
			_g_free0 (fn);
			_g_free0 (data_dir);
		}
		_g_object_unref0 (_data_dir_list);
	}
	_tmp63_ = group;
	_tmp64_ = variant;
	_tmp65_ = g_error_new (G_IO_ERROR, G_IO_ERROR_NOT_FOUND, "Could not find layout file for %s %s", _tmp63_, _tmp64_);
	_inner_error_ = _tmp65_;
	if (_inner_error_->domain == G_IO_ERROR) {
		g_propagate_error (error, _inner_error_);
		_g_free0 (custom_dir);
		_g_object_unref0 (dirs);
		return NULL;
	} else {
		_g_free0 (custom_dir);
		_g_object_unref0 (dirs);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
	_g_free0 (custom_dir);
	_g_object_unref0 (dirs);
}


CaribouGroupModel* caribou_xml_deserializer_load_group (const gchar* keyboard_type, const gchar* group, const gchar* variant) {
	CaribouGroupModel* result = NULL;
	xmlDoc* doc = NULL;
	CaribouGroupModel* grp = NULL;
	const gchar* _tmp12_;
	const gchar* _tmp13_;
	CaribouGroupModel* _tmp14_;
	xmlNode* node = NULL;
	xmlDoc* _tmp15_;
	xmlNode* _tmp16_;
	CaribouGroupModel* _tmp17_;
	xmlNode* _tmp18_;
	xmlDoc* _tmp19_;
	GError * _inner_error_ = NULL;
	g_return_val_if_fail (keyboard_type != NULL, NULL);
	g_return_val_if_fail (group != NULL, NULL);
	g_return_val_if_fail (variant != NULL, NULL);
	{
		gchar* fn = NULL;
		const gchar* _tmp0_;
		const gchar* _tmp1_;
		const gchar* _tmp2_;
		gchar* _tmp3_ = NULL;
		const gchar* _tmp4_;
		xmlDoc* _tmp5_ = NULL;
		xmlDoc* _tmp6_;
		_tmp0_ = keyboard_type;
		_tmp1_ = group;
		_tmp2_ = variant;
		_tmp3_ = caribou_xml_deserializer_get_layout_file (_tmp0_, _tmp1_, _tmp2_, &_inner_error_);
		fn = _tmp3_;
		if (_inner_error_ != NULL) {
			goto __catch1_g_error;
		}
		_tmp4_ = fn;
		_tmp5_ = xmlParseFile (_tmp4_);
		doc = _tmp5_;
		_tmp6_ = doc;
		if (_tmp6_ == NULL) {
			const gchar* _tmp7_;
			GError* _tmp8_;
			_tmp7_ = fn;
			_tmp8_ = g_error_new (G_IO_ERROR, G_IO_ERROR_FAILED, "Cannot load XML text reader for %s", _tmp7_);
			_inner_error_ = _tmp8_;
			_g_free0 (fn);
			goto __catch1_g_error;
		}
		_g_free0 (fn);
	}
	goto __finally1;
	__catch1_g_error:
	{
		GError* e = NULL;
		FILE* _tmp9_;
		GError* _tmp10_;
		const gchar* _tmp11_;
		e = _inner_error_;
		_inner_error_ = NULL;
		_tmp9_ = stdout;
		_tmp10_ = e;
		_tmp11_ = _tmp10_->message;
		fprintf (_tmp9_, "Failed to load XML: %s\n", _tmp11_);
		result = NULL;
		_g_error_free0 (e);
		return result;
	}
	__finally1:
	if (_inner_error_ != NULL) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
	_tmp12_ = group;
	_tmp13_ = variant;
	_tmp14_ = caribou_group_model_new (_tmp12_, _tmp13_);
	grp = _tmp14_;
	_tmp15_ = doc;
	_tmp16_ = _tmp15_->children;
	node = _tmp16_;
	_tmp17_ = grp;
	_tmp18_ = node;
	caribou_xml_deserializer_create_levels_from_xml (_tmp17_, _tmp18_);
	_tmp19_ = doc;
	xmlFreeDoc (_tmp19_);
	xmlCleanupParser ();
	result = grp;
	return result;
}


void caribou_xml_deserializer_create_levels_from_xml (CaribouGroupModel* group, xmlNode* node) {
	xmlNode* _tmp0_;
	const gchar* _tmp1_;
	g_return_if_fail (group != NULL);
	_tmp0_ = node;
	_tmp1_ = _tmp0_->name;
	_vala_assert (g_strcmp0 (_tmp1_, "layout") == 0, "node->name == \"layout\"");
	{
		xmlNode* iter = NULL;
		xmlNode* _tmp2_;
		xmlNode* _tmp3_;
		_tmp2_ = node;
		_tmp3_ = _tmp2_->children;
		iter = _tmp3_;
		{
			gboolean _tmp4_ = FALSE;
			_tmp4_ = TRUE;
			while (TRUE) {
				gboolean _tmp5_;
				xmlNode* _tmp8_;
				xmlNode* _tmp9_;
				xmlElementType _tmp10_;
				gchar* levelname = NULL;
				xmlNode* _tmp11_;
				gchar* _tmp12_ = NULL;
				gchar* mode = NULL;
				xmlNode* _tmp13_;
				gchar* _tmp14_ = NULL;
				CaribouLevelModel* level = NULL;
				const gchar* _tmp15_;
				CaribouLevelModel* _tmp16_;
				CaribouLevelModel* _tmp17_;
				xmlNode* _tmp18_;
				CaribouGroupModel* _tmp19_;
				const gchar* _tmp20_;
				CaribouLevelModel* _tmp21_;
				_tmp5_ = _tmp4_;
				if (!_tmp5_) {
					xmlNode* _tmp6_;
					xmlNode* _tmp7_;
					_tmp6_ = iter;
					_tmp7_ = _tmp6_->next;
					iter = _tmp7_;
				}
				_tmp4_ = FALSE;
				_tmp8_ = iter;
				if (!(_tmp8_ != NULL)) {
					break;
				}
				_tmp9_ = iter;
				_tmp10_ = _tmp9_->type;
				if (_tmp10_ != XML_ELEMENT_NODE) {
					continue;
				}
				_tmp11_ = iter;
				_tmp12_ = xmlGetProp (_tmp11_, "name");
				levelname = _tmp12_;
				_tmp13_ = iter;
				_tmp14_ = xmlGetProp (_tmp13_, "mode");
				mode = _tmp14_;
				_tmp15_ = mode;
				_tmp16_ = caribou_level_model_new (_tmp15_);
				level = _tmp16_;
				_tmp17_ = level;
				_tmp18_ = iter;
				caribou_xml_deserializer_load_rows (_tmp17_, _tmp18_);
				_tmp19_ = group;
				_tmp20_ = levelname;
				_tmp21_ = level;
				caribou_group_model_add_level (_tmp19_, _tmp20_, _tmp21_);
				_g_object_unref0 (level);
				_g_free0 (mode);
				_g_free0 (levelname);
			}
		}
	}
}


void caribou_xml_deserializer_load_rows (CaribouLevelModel* level, xmlNode* node) {
	xmlNode* _tmp0_;
	const gchar* _tmp1_;
	g_return_if_fail (level != NULL);
	_tmp0_ = node;
	_tmp1_ = _tmp0_->name;
	_vala_assert (g_strcmp0 (_tmp1_, "level") == 0, "node->name == \"level\"");
	{
		xmlNode* i = NULL;
		xmlNode* _tmp2_;
		xmlNode* _tmp3_;
		_tmp2_ = node;
		_tmp3_ = _tmp2_->children;
		i = _tmp3_;
		{
			gboolean _tmp4_ = FALSE;
			_tmp4_ = TRUE;
			while (TRUE) {
				gboolean _tmp5_;
				xmlNode* _tmp8_;
				xmlNode* _tmp9_;
				xmlElementType _tmp10_;
				CaribouRowModel* row = NULL;
				CaribouRowModel* _tmp11_;
				CaribouLevelModel* _tmp12_;
				CaribouRowModel* _tmp13_;
				_tmp5_ = _tmp4_;
				if (!_tmp5_) {
					xmlNode* _tmp6_;
					xmlNode* _tmp7_;
					_tmp6_ = i;
					_tmp7_ = _tmp6_->next;
					i = _tmp7_;
				}
				_tmp4_ = FALSE;
				_tmp8_ = i;
				if (!(_tmp8_ != NULL)) {
					break;
				}
				_tmp9_ = i;
				_tmp10_ = _tmp9_->type;
				if (_tmp10_ != XML_ELEMENT_NODE) {
					continue;
				}
				_tmp11_ = caribou_row_model_new ();
				row = _tmp11_;
				_tmp12_ = level;
				_tmp13_ = row;
				caribou_level_model_add_row (_tmp12_, _tmp13_);
				{
					xmlNode* i2 = NULL;
					xmlNode* _tmp14_;
					xmlNode* _tmp15_;
					_tmp14_ = i;
					_tmp15_ = _tmp14_->children;
					i2 = _tmp15_;
					{
						gboolean _tmp16_ = FALSE;
						_tmp16_ = TRUE;
						while (TRUE) {
							gboolean _tmp17_;
							xmlNode* _tmp20_;
							xmlNode* _tmp21_;
							xmlElementType _tmp22_;
							xmlNode* _tmp23_;
							const gchar* _tmp24_;
							CaribouRowModel* _tmp30_;
							xmlNode* _tmp31_;
							gchar* _tmp32_ = NULL;
							gchar* _tmp33_;
							xmlNode* _tmp34_;
							_tmp17_ = _tmp16_;
							if (!_tmp17_) {
								xmlNode* _tmp18_;
								xmlNode* _tmp19_;
								_tmp18_ = i2;
								_tmp19_ = _tmp18_->next;
								i2 = _tmp19_;
							}
							_tmp16_ = FALSE;
							_tmp20_ = i2;
							if (!(_tmp20_ != NULL)) {
								break;
							}
							_tmp21_ = i2;
							_tmp22_ = _tmp21_->type;
							if (_tmp22_ != XML_ELEMENT_NODE) {
								continue;
							}
							_tmp23_ = i2;
							_tmp24_ = _tmp23_->name;
							if (g_strcmp0 (_tmp24_, "key") == 0) {
								CaribouRowModel* _tmp25_;
								xmlNode* _tmp26_;
								gchar* _tmp27_ = NULL;
								gchar* _tmp28_;
								xmlNode* _tmp29_;
								_tmp25_ = row;
								_tmp26_ = i;
								_tmp27_ = xmlGetProp (_tmp26_, "align");
								_tmp28_ = _tmp27_;
								_tmp29_ = i;
								caribou_xml_deserializer_load_column (_tmp25_, _tmp28_, _tmp29_);
								_g_free0 (_tmp28_);
								break;
							}
							_tmp30_ = row;
							_tmp31_ = i2;
							_tmp32_ = xmlGetProp (_tmp31_, "align");
							_tmp33_ = _tmp32_;
							_tmp34_ = i2;
							caribou_xml_deserializer_load_column (_tmp30_, _tmp33_, _tmp34_);
							_g_free0 (_tmp33_);
						}
					}
				}
				_g_object_unref0 (row);
			}
		}
	}
}


void caribou_xml_deserializer_load_column (CaribouRowModel* row, const gchar* align, xmlNode* node) {
	CaribouColumnModel* column = NULL;
	CaribouColumnModel* _tmp0_;
	CaribouRowModel* _tmp1_;
	CaribouColumnModel* _tmp2_;
	g_return_if_fail (row != NULL);
	_tmp0_ = caribou_column_model_new ();
	column = _tmp0_;
	_tmp1_ = row;
	_tmp2_ = column;
	caribou_row_model_add_column (_tmp1_, _tmp2_);
	{
		xmlNode* i = NULL;
		xmlNode* _tmp3_;
		xmlNode* _tmp4_;
		_tmp3_ = node;
		_tmp4_ = _tmp3_->children;
		i = _tmp4_;
		{
			gboolean _tmp5_ = FALSE;
			_tmp5_ = TRUE;
			while (TRUE) {
				gboolean _tmp6_;
				xmlNode* _tmp9_;
				xmlNode* _tmp10_;
				xmlElementType _tmp11_;
				CaribouColumnModel* _tmp12_;
				xmlNode* _tmp13_;
				const gchar* _tmp14_;
				CaribouKeyModel* _tmp15_ = NULL;
				CaribouKeyModel* _tmp16_;
				_tmp6_ = _tmp5_;
				if (!_tmp6_) {
					xmlNode* _tmp7_;
					xmlNode* _tmp8_;
					_tmp7_ = i;
					_tmp8_ = _tmp7_->next;
					i = _tmp8_;
				}
				_tmp5_ = FALSE;
				_tmp9_ = i;
				if (!(_tmp9_ != NULL)) {
					break;
				}
				_tmp10_ = i;
				_tmp11_ = _tmp10_->type;
				if (_tmp11_ != XML_ELEMENT_NODE) {
					continue;
				}
				_tmp12_ = column;
				_tmp13_ = i;
				_tmp14_ = align;
				_tmp15_ = caribou_xml_deserializer_load_key (_tmp13_, _tmp14_);
				_tmp16_ = _tmp15_;
				caribou_column_model_add_key (_tmp12_, _tmp16_);
				_g_object_unref0 (_tmp16_);
			}
		}
	}
	_g_object_unref0 (column);
}


static gdouble double_parse (const gchar* str) {
	gdouble result = 0.0;
	const gchar* _tmp0_;
	gdouble _tmp1_ = 0.0;
	g_return_val_if_fail (str != NULL, 0.0);
	_tmp0_ = str;
	_tmp1_ = g_ascii_strtod (_tmp0_, NULL);
	result = _tmp1_;
	return result;
}


CaribouKeyModel* caribou_xml_deserializer_load_key (xmlNode* node, const gchar* align) {
	CaribouKeyModel* result = NULL;
	xmlNode* _tmp0_;
	const gchar* _tmp1_;
	gchar* name = NULL;
	xmlNode* _tmp2_;
	gchar* _tmp3_ = NULL;
	const gchar* _tmp4_;
	gchar* text = NULL;
	xmlNode* _tmp5_;
	gchar* _tmp6_ = NULL;
	CaribouKeyModel* key = NULL;
	const gchar* _tmp7_;
	const gchar* _tmp8_;
	CaribouKeyModel* _tmp9_;
	const gchar* _tmp10_;
	_tmp0_ = node;
	_tmp1_ = _tmp0_->name;
	_vala_assert (g_strcmp0 (_tmp1_, "key") == 0, "node->name == \"key\"");
	_tmp2_ = node;
	_tmp3_ = xmlGetProp (_tmp2_, "name");
	name = _tmp3_;
	_tmp4_ = name;
	_vala_assert (_tmp4_ != NULL, "name != null");
	_tmp5_ = node;
	_tmp6_ = xmlGetProp (_tmp5_, "text");
	text = _tmp6_;
	_tmp7_ = name;
	_tmp8_ = text;
	_tmp9_ = caribou_key_model_new (_tmp7_, _tmp8_);
	key = _tmp9_;
	_tmp10_ = align;
	if (_tmp10_ != NULL) {
		CaribouKeyModel* _tmp11_;
		const gchar* _tmp12_;
		_tmp11_ = key;
		_tmp12_ = align;
		caribou_key_model_set_align (_tmp11_, _tmp12_);
	}
	{
		xmlAttr* prop = NULL;
		xmlNode* _tmp13_;
		xmlAttr* _tmp14_;
		_tmp13_ = node;
		_tmp14_ = _tmp13_->properties;
		prop = _tmp14_;
		{
			gboolean _tmp15_ = FALSE;
			_tmp15_ = TRUE;
			while (TRUE) {
				gboolean _tmp16_;
				xmlAttr* _tmp19_;
				xmlAttr* _tmp20_;
				const gchar* _tmp21_;
				_tmp16_ = _tmp15_;
				if (!_tmp16_) {
					xmlAttr* _tmp17_;
					xmlAttr* _tmp18_;
					_tmp17_ = prop;
					_tmp18_ = _tmp17_->next;
					prop = _tmp18_;
				}
				_tmp15_ = FALSE;
				_tmp19_ = prop;
				if (!(_tmp19_ != NULL)) {
					break;
				}
				_tmp20_ = prop;
				_tmp21_ = _tmp20_->name;
				if (g_strcmp0 (_tmp21_, "toggle") == 0) {
					CaribouKeyModel* _tmp22_;
					xmlAttr* _tmp23_;
					xmlNode* _tmp24_;
					const gchar* _tmp25_;
					_tmp22_ = key;
					_tmp23_ = prop;
					_tmp24_ = _tmp23_->children;
					_tmp25_ = _tmp24_->content;
					caribou_key_model_set_toggle (_tmp22_, _tmp25_);
				} else {
					xmlAttr* _tmp26_;
					const gchar* _tmp27_;
					_tmp26_ = prop;
					_tmp27_ = _tmp26_->name;
					if (g_strcmp0 (_tmp27_, "align") == 0) {
						CaribouKeyModel* _tmp28_;
						xmlAttr* _tmp29_;
						xmlNode* _tmp30_;
						const gchar* _tmp31_;
						_tmp28_ = key;
						_tmp29_ = prop;
						_tmp30_ = _tmp29_->children;
						_tmp31_ = _tmp30_->content;
						caribou_key_model_set_align (_tmp28_, _tmp31_);
					} else {
						xmlAttr* _tmp32_;
						const gchar* _tmp33_;
						_tmp32_ = prop;
						_tmp33_ = _tmp32_->name;
						if (g_strcmp0 (_tmp33_, "width") == 0) {
							CaribouKeyModel* _tmp34_;
							xmlAttr* _tmp35_;
							xmlNode* _tmp36_;
							const gchar* _tmp37_;
							gdouble _tmp38_ = 0.0;
							_tmp34_ = key;
							_tmp35_ = prop;
							_tmp36_ = _tmp35_->children;
							_tmp37_ = _tmp36_->content;
							_tmp38_ = double_parse (_tmp37_);
							caribou_key_model_set_width (_tmp34_, _tmp38_);
						} else {
							gboolean _tmp39_ = FALSE;
							xmlAttr* _tmp40_;
							const gchar* _tmp41_;
							gboolean _tmp43_;
							_tmp40_ = prop;
							_tmp41_ = _tmp40_->name;
							if (g_strcmp0 (_tmp41_, "repeatable") == 0) {
								const gchar* _tmp42_;
								_tmp42_ = text;
								_tmp39_ = _tmp42_ == NULL;
							} else {
								_tmp39_ = FALSE;
							}
							_tmp43_ = _tmp39_;
							if (_tmp43_) {
								CaribouKeyModel* _tmp44_;
								xmlAttr* _tmp45_;
								xmlNode* _tmp46_;
								const gchar* _tmp47_;
								_tmp44_ = key;
								_tmp45_ = prop;
								_tmp46_ = _tmp45_->children;
								_tmp47_ = _tmp46_->content;
								caribou_key_model_set_repeatable (_tmp44_, g_strcmp0 (_tmp47_, "yes") == 0);
							}
						}
					}
				}
			}
		}
	}
	{
		xmlNode* i = NULL;
		xmlNode* _tmp48_;
		xmlNode* _tmp49_;
		_tmp48_ = node;
		_tmp49_ = _tmp48_->children;
		i = _tmp49_;
		{
			gboolean _tmp50_ = FALSE;
			_tmp50_ = TRUE;
			while (TRUE) {
				gboolean _tmp51_;
				xmlNode* _tmp54_;
				xmlNode* _tmp55_;
				xmlElementType _tmp56_;
				CaribouKeyModel* _tmp57_;
				xmlNode* _tmp58_;
				CaribouKeyModel* _tmp59_ = NULL;
				CaribouKeyModel* _tmp60_;
				_tmp51_ = _tmp50_;
				if (!_tmp51_) {
					xmlNode* _tmp52_;
					xmlNode* _tmp53_;
					_tmp52_ = i;
					_tmp53_ = _tmp52_->next;
					i = _tmp53_;
				}
				_tmp50_ = FALSE;
				_tmp54_ = i;
				if (!(_tmp54_ != NULL)) {
					break;
				}
				_tmp55_ = i;
				_tmp56_ = _tmp55_->type;
				if (_tmp56_ != XML_ELEMENT_NODE) {
					continue;
				}
				_tmp57_ = key;
				_tmp58_ = i;
				_tmp59_ = caribou_xml_deserializer_load_key (_tmp58_, NULL);
				_tmp60_ = _tmp59_;
				caribou_key_model_add_subkey (_tmp57_, _tmp60_);
				_g_object_unref0 (_tmp60_);
			}
		}
	}
	result = key;
	_g_free0 (text);
	_g_free0 (name);
	return result;
}


CaribouXmlDeserializer* caribou_xml_deserializer_construct (GType object_type) {
	CaribouXmlDeserializer * self = NULL;
	self = (CaribouXmlDeserializer*) g_object_new (object_type, NULL);
	return self;
}


CaribouXmlDeserializer* caribou_xml_deserializer_new (void) {
	return caribou_xml_deserializer_construct (CARIBOU_TYPE_XML_DESERIALIZER);
}


static void caribou_xml_deserializer_class_init (CaribouXmlDeserializerClass * klass) {
	caribou_xml_deserializer_parent_class = g_type_class_peek_parent (klass);
}


static void caribou_xml_deserializer_instance_init (CaribouXmlDeserializer * self) {
}


GType caribou_xml_deserializer_get_type (void) {
	static volatile gsize caribou_xml_deserializer_type_id__volatile = 0;
	if (g_once_init_enter (&caribou_xml_deserializer_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (CaribouXmlDeserializerClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) caribou_xml_deserializer_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (CaribouXmlDeserializer), 0, (GInstanceInitFunc) caribou_xml_deserializer_instance_init, NULL };
		GType caribou_xml_deserializer_type_id;
		caribou_xml_deserializer_type_id = g_type_register_static (G_TYPE_OBJECT, "CaribouXmlDeserializer", &g_define_type_info, 0);
		g_once_init_leave (&caribou_xml_deserializer_type_id__volatile, caribou_xml_deserializer_type_id);
	}
	return caribou_xml_deserializer_type_id__volatile;
}


static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	if ((array != NULL) && (destroy_func != NULL)) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}


static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}


static gint _vala_array_length (gpointer array) {
	int length;
	length = 0;
	if (array) {
		while (((gpointer*) array)[length]) {
			length++;
		}
	}
	return length;
}



